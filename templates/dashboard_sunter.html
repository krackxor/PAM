<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUNTER DASHBOARD | Monitoring & Analisa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Scrollbar for Excel Look */
        .excel-scroll::-webkit-scrollbar { width: 8px; height: 8px; }
        .excel-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .excel-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .excel-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .active-tab {
            color: #2563eb;
            border-bottom: 2px solid #2563eb;
            background-color: #eff6ff;
        }

        /* Sticky Column for Excel Table */
        .sticky-col {
            position: sticky;
            left: 0;
            background: white;
            z-index: 10;
        }
        
        tr:hover td { background-color: #f8fafc; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 overflow-hidden h-screen flex flex-col">

    <!-- ðŸŒ GLOBAL HEADER (ALWAYS VISIBLE) -->
    <header class="bg-white border-b border-slate-200 shadow-sm z-50 shrink-0">
        <div class="px-6 py-3">
            <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 p-2 rounded-lg">
                        <i data-lucide="droplets" class="text-white w-6 h-6"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-xl tracking-tight">SUNTER DASHBOARD</h1>
                        <p class="text-[10px] text-slate-500 font-medium uppercase tracking-widest">Single Page Operation System</p>
                    </div>
                </div>

                <!-- Global Filters -->
                <div class="flex flex-wrap items-center gap-2">
                    <div class="flex items-center bg-slate-100 rounded-md px-2 border border-slate-200">
                        <i data-lucide="map-pin" class="w-4 h-4 text-slate-400 mr-2"></i>
                        <select class="bg-transparent py-1.5 text-xs font-semibold outline-none cursor-pointer">
                            <option>SUNTER (34 + 35)</option>
                            <option>Rayon 34</option>
                            <option>Rayon 35</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center bg-slate-100 rounded-md px-2 border border-slate-200">
                        <select class="bg-transparent py-1.5 text-xs outline-none cursor-pointer">
                            <option>Semua PC</option>
                            <option>PC 34</option>
                            <option>PC 35</option>
                        </select>
                    </div>

                    <div class="flex items-center bg-slate-100 rounded-md px-2 border border-slate-200">
                        <select class="bg-transparent py-1.5 text-xs outline-none cursor-pointer">
                            <option>Semua Tarif</option>
                            <option>Sosial</option>
                            <option>Rumah Tangga</option>
                            <option>Niaga</option>
                        </select>
                    </div>

                    <div class="flex items-center bg-slate-100 rounded-md px-2 border border-slate-200">
                        <i data-lucide="calendar" class="w-4 h-4 text-slate-400 mr-2"></i>
                        <input type="month" value="2025-12" class="bg-transparent py-1 text-xs outline-none cursor-pointer font-medium">
                    </div>

                    <div class="relative group">
                        <input type="text" placeholder="Cari Nomen / Nama..." class="pl-9 pr-4 py-1.5 bg-slate-100 border border-slate-200 rounded-md text-xs w-48 focus:w-64 transition-all focus:bg-white outline-none">
                        <i data-lucide="search" class="w-4 h-4 absolute left-3 top-2 text-slate-400"></i>
                    </div>
                    
                    <button class="bg-blue-600 hover:bg-blue-700 text-white p-1.5 rounded-md transition shadow-sm">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- ðŸ“Œ NAVIGASI UTAMA (TAB) -->
        <nav class="flex px-6 border-t border-slate-100 overflow-x-auto bg-white no-scrollbar">
            <button onclick="openTab('ringkasan')" class="tab-link active-tab px-5 py-3 text-xs font-bold whitespace-nowrap flex items-center gap-2 border-b-2 transition-all">
                <i data-lucide="layout-grid" class="w-4 h-4"></i> Ringkasan
            </button>
            <button onclick="openTab('collection')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="banknote" class="w-4 h-4"></i> Collection
            </button>
            <button onclick="openTab('meter')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="gauge" class="w-4 h-4"></i> Meter
            </button>
            <button onclick="openTab('history')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="history" class="w-4 h-4"></i> History
            </button>
            <button onclick="openTab('analisa')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="file-search" class="w-4 h-4"></i> Analisa Manual
            </button>
            <button onclick="openTab('top')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="award" class="w-4 h-4"></i> TOP
            </button>
            <button onclick="openTab('alert')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="bell-ring" class="w-4 h-4"></i> Alert
            </button>
            <button onclick="openTab('laporan')" class="tab-link px-5 py-3 text-xs font-bold text-slate-500 whitespace-nowrap flex items-center gap-2 border-b-2 border-transparent hover:text-blue-600 transition-all">
                <i data-lucide="file-text" class="w-4 h-4"></i> Laporan
            </button>
        </nav>
    </header>

    <!-- ðŸ§± MAIN CONTENT AREA -->
    <main class="flex-1 overflow-y-auto p-6 bg-slate-50">

        <!-- 1ï¸âƒ£ TAB: RINGKASAN -->
        <section id="ringkasan" class="tab-content active space-y-6">
            <!-- KPI Utama -->
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">Total Pelanggan</p>
                    <h3 class="text-xl font-bold mt-1">125,482</h3>
                    <div class="text-[10px] text-emerald-600 font-bold mt-1 flex items-center"><i data-lucide="trending-up" class="w-3 h-3 mr-1"></i> +0.4%</div>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">Master Customer (MC)</p>
                    <h3 class="text-xl font-bold mt-1">Rp 45.2M</h3>
                    <div class="text-[10px] text-slate-400 font-medium mt-1">Target Bulan Ini</div>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm bg-blue-50 border-blue-100">
                    <p class="text-[10px] font-bold text-blue-600 uppercase">Collection</p>
                    <h3 class="text-xl font-bold mt-1 text-blue-700">Rp 38.1M</h3>
                    <div class="text-[10px] text-blue-500 font-medium mt-1">Real-time update</div>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">Rate (%)</p>
                    <h3 class="text-xl font-bold mt-1">84.29%</h3>
                    <div class="w-full bg-slate-100 h-1.5 rounded-full mt-2 overflow-hidden">
                        <div class="bg-emerald-500 h-full w-[84%]"></div>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">Tunggakan</p>
                    <h3 class="text-xl font-bold mt-1 text-rose-600">Rp 7.1M</h3>
                    <div class="text-[10px] text-rose-400 font-medium mt-1">Belum tertagih</div>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">Anomali Meter</p>
                    <h3 class="text-xl font-bold mt-1 text-amber-600">1,204</h3>
                    <div class="text-[10px] text-amber-500 font-bold mt-1">Perlu Analisa</div>
                </div>
            </div>

            <!-- Grafik Utama -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <div class="flex items-center justify-between mb-6">
                        <h4 class="font-bold text-slate-700">Tren Collection SUNTER vs Rayon</h4>
                        <div class="flex gap-2">
                            <span class="flex items-center gap-1 text-[10px] font-bold text-slate-400"><span class="w-2 h-2 bg-blue-600 rounded-full"></span> Sunter</span>
                            <span class="flex items-center gap-1 text-[10px] font-bold text-slate-400"><span class="w-2 h-2 bg-sky-400 rounded-full"></span> Rayon 34</span>
                            <span class="flex items-center gap-1 text-[10px] font-bold text-slate-400"><span class="w-2 h-2 bg-indigo-400 rounded-full"></span> Rayon 35</span>
                        </div>
                    </div>
                    <canvas id="chartTren" class="w-full h-64"></canvas>
                </div>
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <h4 class="font-bold text-slate-700 mb-6 text-center">Komposisi Collection per Rayon</h4>
                    <canvas id="chartPie" class="w-full h-64"></canvas>
                    <div class="mt-6 space-y-3">
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-slate-500">Rayon 34 (Sunter Utara)</span>
                            <span class="font-bold">54.2%</span>
                        </div>
                        <div class="flex justify-between items-center text-xs">
                            <span class="text-slate-500">Rayon 35 (Sunter Selatan)</span>
                            <span class="font-bold">45.8%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2ï¸âƒ£ TAB: COLLECTION -->
        <section id="collection" class="tab-content space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="bg-emerald-600 text-white p-4 rounded-xl shadow-lg">
                    <p class="text-[10px] font-bold opacity-80 uppercase">Collection Current</p>
                    <h3 class="text-2xl font-bold">Rp 24.5 M</h3>
                    <p class="text-[10px] mt-1 opacity-80">64.3% dari total</p>
                </div>
                <div class="bg-blue-600 text-white p-4 rounded-xl shadow-lg">
                    <p class="text-[10px] font-bold opacity-80 uppercase">Collection Undue</p>
                    <h3 class="text-2xl font-bold">Rp 13.6 M</h3>
                    <p class="text-[10px] mt-1 opacity-80">35.7% dari total</p>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">MB Undue (Target)</p>
                    <h3 class="text-2xl font-bold">Rp 15.2 M</h3>
                    <p class="text-[10px] mt-1 text-blue-600 font-bold">Progress 89.4%</p>
                </div>
                <div class="bg-white p-4 rounded-xl border border-slate-200">
                    <p class="text-[10px] font-bold text-slate-500 uppercase">Kumulatif Hari Ini</p>
                    <h3 class="text-2xl font-bold">Rp 1.2 M</h3>
                    <p class="text-[10px] mt-1 text-emerald-600 font-bold">â†‘ 12% vs Kemarin</p>
                </div>
            </div>

            <!-- Tabel Excel Version -->
            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-[500px]">
                <div class="px-4 py-3 bg-slate-50 border-b border-slate-200 flex justify-between items-center">
                    <h4 class="text-xs font-bold text-slate-700">Daily Collection Table (Excel View)</h4>
                    <div class="flex gap-2">
                        <button class="flex items-center gap-1 text-[10px] bg-white border border-slate-300 px-3 py-1.5 rounded-md hover:bg-slate-50 transition"><i data-lucide="download" class="w-3 h-3"></i> Export Excel</button>
                    </div>
                </div>
                <div class="flex-1 overflow-auto excel-scroll text-xs">
                    <table class="w-full border-collapse">
                        <thead class="sticky top-0 bg-slate-100 z-20 shadow-sm">
                            <tr class="text-slate-500 uppercase tracking-wider font-bold text-[10px]">
                                <th class="sticky-col border-b border-r px-4 py-3 text-left w-24">Tgl</th>
                                <th class="border-b border-r px-4 py-3 text-right">Jml Cust</th>
                                <th class="border-b border-r px-4 py-3 text-right">MC (Target)</th>
                                <th class="border-b border-r px-4 py-3 text-right">MB Undue</th>
                                <th class="border-b border-r px-4 py-3 text-right bg-emerald-50 text-emerald-700">Coll Current</th>
                                <th class="border-b border-r px-4 py-3 text-right bg-blue-50 text-blue-700">Coll Undue</th>
                                <th class="border-b border-r px-4 py-3 text-right bg-slate-200">Total Coll</th>
                                <th class="border-b border-r px-4 py-3 text-right">% MC</th>
                                <th class="border-b border-r px-4 py-3 text-right">Kumulatif</th>
                                <th class="border-b px-4 py-3 text-center">Var H-1</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <!-- Loop Data Dummy -->
                            <script>
                                const rows = [];
                                for(let i=1; i<=31; i++) {
                                    document.write(`
                                        <tr class="hover:bg-blue-50/30 transition-colors">
                                            <td class="sticky-col border-r px-4 py-2.5 font-bold text-slate-600">${i < 10 ? '0'+i : i}-12-25</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono">${(Math.random() * 500 + 1000).toFixed(0)}</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono text-slate-400">1.458.200.000</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono text-slate-400">490.300.000</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono font-bold text-emerald-600">842.100.000</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono font-bold text-blue-600">350.200.000</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono font-bold bg-slate-50 text-slate-800">1.192.300.000</td>
                                            <td class="border-r px-4 py-2.5 text-right font-bold text-emerald-500">81.7%</td>
                                            <td class="border-r px-4 py-2.5 text-right font-mono font-bold text-indigo-600">38.102.500.000</td>
                                            <td class="px-4 py-2.5 text-center">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-800 font-bold text-[9px]">
                                                    <i data-lucide="trending-up" class="w-2 h-2 mr-1"></i> +2.4%
                                                </span>
                                            </td>
                                        </tr>
                                    `);
                                }
                            </script>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 3ï¸âƒ£ TAB: METER -->
        <section id="meter" class="tab-content space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4">
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-rose-500 shadow-sm cursor-pointer hover:bg-slate-50 transition" onclick="openTab('analisa')">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Extreme</p>
                    <h3 class="text-lg font-bold">242</h3>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-amber-500 shadow-sm cursor-pointer hover:bg-slate-50 transition">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Turun</p>
                    <h3 class="text-lg font-bold">156</h3>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-slate-400 shadow-sm cursor-pointer hover:bg-slate-50 transition">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Zero Usage</p>
                    <h3 class="text-lg font-bold">482</h3>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-indigo-500 shadow-sm cursor-pointer hover:bg-slate-50 transition">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Stand Negatif</p>
                    <h3 class="text-lg font-bold">12</h3>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-blue-400 shadow-sm cursor-pointer hover:bg-slate-50 transition">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Salah Catat</p>
                    <h3 class="text-lg font-bold">45</h3>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-emerald-400 shadow-sm cursor-pointer hover:bg-slate-50 transition">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Rebill</p>
                    <h3 class="text-lg font-bold">124</h3>
                </div>
                <div class="bg-white p-4 rounded-xl border-l-4 border-l-purple-400 shadow-sm cursor-pointer hover:bg-slate-50 transition">
                    <p class="text-[9px] font-bold text-slate-400 uppercase">Estimasi</p>
                    <h3 class="text-lg font-bold">143</h3>
                </div>
            </div>

            <!-- Meter List -->
            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                <table class="w-full text-xs text-left">
                    <thead class="bg-slate-50 border-b border-slate-200 text-[10px] font-bold uppercase text-slate-500">
                        <tr>
                            <th class="px-6 py-4">Nomen</th>
                            <th class="px-6 py-4">Nama Pelanggan</th>
                            <th class="px-6 py-4">Rayon</th>
                            <th class="px-6 py-4">Kubikasi (m3)</th>
                            <th class="px-6 py-4">Jenis Anomali</th>
                            <th class="px-6 py-4 text-center">Aksi</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 font-mono font-bold">601230491</td>
                            <td class="px-6 py-4 font-medium text-slate-700">PT. LOGISTIK MAJU JAYA</td>
                            <td class="px-6 py-4">Rayon 34</td>
                            <td class="px-6 py-4 text-rose-600 font-bold">2.450 (â†‘ 300%)</td>
                            <td class="px-6 py-4"><span class="px-2 py-0.5 rounded bg-rose-100 text-rose-700 font-bold text-[9px]">EXTREME USAGE</span></td>
                            <td class="px-6 py-4 text-center">
                                <button onclick="openTab('analisa')" class="text-blue-600 hover:underline font-bold">Analisa Manual</button>
                            </td>
                        </tr>
                        <!-- More dummy rows -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 5ï¸âƒ£ TAB: ANALISA MANUAL (PUSAT KERJA) -->
        <section id="analisa" class="tab-content">
            <div class="flex flex-col lg:flex-row gap-6 h-[700px]">
                <!-- Sidebar List Pelanggan Ber-Anomali -->
                <div class="w-full lg:w-1/3 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden">
                    <div class="p-4 border-b bg-slate-50">
                        <h4 class="font-bold text-slate-700 text-xs mb-3">Daftar Anomali & Tunggakan Premium</h4>
                        <div class="relative">
                            <input type="text" placeholder="Filter Nomen/Status..." class="w-full pl-9 pr-4 py-2 bg-white border border-slate-200 rounded-md text-xs outline-none focus:ring-2 focus:ring-blue-500">
                            <i data-lucide="filter" class="w-4 h-4 absolute left-3 top-2.5 text-slate-400"></i>
                        </div>
                    </div>
                    <div class="flex-1 overflow-y-auto divide-y divide-slate-100">
                        <!-- Active Item -->
                        <div class="p-4 bg-blue-50 border-l-4 border-blue-600 cursor-pointer">
                            <div class="flex justify-between items-start mb-1">
                                <span class="text-[10px] font-mono font-bold text-blue-700">601230491</span>
                                <span class="px-2 py-0.5 rounded bg-rose-500 text-white font-bold text-[8px]">URGENT</span>
                            </div>
                            <h5 class="text-xs font-bold text-slate-800">PT. LOGISTIK MAJU JAYA</h5>
                            <p class="text-[10px] text-slate-500 mt-1 line-clamp-1">Jl. Sunter Agung Utara Blok A No. 12</p>
                            <div class="mt-2 flex gap-2">
                                <span class="text-[9px] text-rose-600 font-bold bg-rose-50 px-1.5 py-0.5 rounded italic">Extreme Usage</span>
                                <span class="text-[9px] text-slate-400 font-medium">Update: 10m ago</span>
                            </div>
                        </div>
                        <!-- Other Items -->
                        <div class="p-4 hover:bg-slate-50 cursor-pointer">
                            <div class="flex justify-between items-start mb-1">
                                <span class="text-[10px] font-mono font-bold text-slate-400">601550212</span>
                                <span class="px-2 py-0.5 rounded bg-emerald-500 text-white font-bold text-[8px]">PROGRESS</span>
                            </div>
                            <h5 class="text-xs font-bold text-slate-800">HOTEL SUNTER INDAH</h5>
                            <p class="text-[10px] text-slate-500 mt-1 line-clamp-1">Jl. Danau Sunter Barat Kav. 23</p>
                            <div class="mt-2 flex gap-2">
                                <span class="text-[9px] text-amber-600 font-bold bg-amber-50 px-1.5 py-0.5 rounded italic">Zero Usage</span>
                                <span class="text-[9px] text-slate-400 font-medium">Update: 2h ago</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detail Panel & Form Input -->
                <div class="flex-1 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden">
                    <div class="px-6 py-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center">
                        <div class="flex items-center gap-4">
                            <h4 class="font-bold text-slate-700">Profil Pelanggan & Form Analisa</h4>
                            <span class="text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 font-bold rounded">OPEN STATUS</span>
                        </div>
                        <div class="flex gap-2">
                            <button class="px-3 py-1.5 bg-white border border-slate-200 text-[10px] font-bold rounded-md hover:bg-slate-50 transition"><i data-lucide="share-2" class="w-3 h-3 inline mr-1"></i> Bagikan</button>
                            <button class="px-3 py-1.5 bg-emerald-600 text-white text-[10px] font-bold rounded-md hover:bg-emerald-700 transition shadow-sm"><i data-lucide="save" class="w-3 h-3 inline mr-1"></i> Simpan Analisa</button>
                        </div>
                    </div>
                    
                    <div class="flex-1 overflow-y-auto p-8 space-y-8">
                        <!-- Profil Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="col-span-2 space-y-4">
                                <div>
                                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Nama Pelanggan / Nomen</p>
                                    <h2 class="text-xl font-extrabold text-slate-900">PT. LOGISTIK MAJU JAYA <span class="text-slate-300 font-mono ml-2">#601230491</span></h2>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100">
                                        <p class="text-[9px] font-bold text-slate-400 uppercase">Tarif</p>
                                        <p class="text-xs font-bold">NIAGA-2 (N2)</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100">
                                        <p class="text-[9px] font-bold text-slate-400 uppercase">Rayon / PC / PCEZ</p>
                                        <p class="text-xs font-bold text-blue-600">34 / 098 / 098-02</p>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-[9px] font-bold text-slate-400 uppercase">Alamat Lengkap</p>
                                    <p class="text-xs text-slate-600 italic">Jl. Sunter Agung Utara Blok A No. 12, Kel. Sunter Agung, Kec. Tanjung Priok, Jakarta Utara</p>
                                </div>
                            </div>
                            <div class="bg-slate-900 rounded-xl p-6 text-white flex flex-col justify-between">
                                <div>
                                    <p class="text-[10px] font-bold opacity-60 uppercase">Tagihan Berjalan</p>
                                    <h3 class="text-2xl font-bold mt-1">Rp 18.240.500</h3>
                                </div>
                                <div class="space-y-2 mt-4">
                                    <div class="flex justify-between text-[10px]">
                                        <span class="opacity-60 text-emerald-400 font-bold">Current</span>
                                        <span>Rp 12.100.000</span>
                                    </div>
                                    <div class="flex justify-between text-[10px]">
                                        <span class="opacity-60 text-rose-400 font-bold">Ardebt</span>
                                        <span>Rp 6.140.500</span>
                                    </div>
                                </div>
                                <button class="w-full mt-4 bg-white/10 hover:bg-white/20 py-2 rounded-lg text-[10px] font-bold transition">Cek History Bayar</button>
                            </div>
                        </div>

                        <!-- Charts History (Embedded) -->
                        <div class="p-4 bg-slate-50 border border-slate-200 rounded-xl">
                            <h5 class="text-[10px] font-bold text-slate-500 uppercase mb-4">Tren Kubikasi 12 Bulan Terakhir</h5>
                            <canvas id="chartHistoryKubikasi" class="w-full h-32"></canvas>
                        </div>

                        <!-- Form Analisa Manual -->
                        <div class="space-y-6 pt-4 border-t border-slate-100">
                            <h4 class="font-bold text-slate-700 flex items-center gap-2">
                                <i data-lucide="edit-3" class="w-4 h-4 text-blue-600"></i> Form Hasil Analisa Tim
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label class="text-[10px] font-bold text-slate-500 uppercase">Jenis Anomali</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-xs outline-none focus:ring-2 focus:ring-blue-500">
                                        <option>-- Pilih Jenis --</option>
                                        <option selected>Extreme Usage (Pemakaian Naik Drastis)</option>
                                        <option>Zero Usage (Meter Berhenti)</option>
                                        <option>Meter Tidak Dapat Dibaca (Kabur/Rusak)</option>
                                    </select>
                                </div>
                                <div class="space-y-2">
                                    <label class="text-[10px] font-bold text-slate-500 uppercase">Status Operasional</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-xs outline-none focus:ring-2 focus:ring-blue-500">
                                        <option selected>Open - Perlu Cek Lapangan</option>
                                        <option>Progress - Sedang di Lapangan</option>
                                        <option>Closed - Selesai Analisa</option>
                                    </select>
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label class="text-[10px] font-bold text-slate-500 uppercase">Analisa Tim & Hasil Verifikasi Lapangan</label>
                                <textarea rows="3" placeholder="Tuliskan detail temuan..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 text-xs outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label class="text-[10px] font-bold text-slate-500 uppercase">Kesimpulan</label>
                                    <input type="text" placeholder="Contoh: Meter rusak mekanik..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-xs outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div class="space-y-2">
                                    <label class="text-[10px] font-bold text-slate-500 uppercase">Rekomendasi Tindak Lanjut</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-xs outline-none focus:ring-2 focus:ring-blue-500">
                                        <option>Ganti Meter Baru (Ganti Total)</option>
                                        <option>Rebill (Koreksi Tagihan)</option>
                                        <option>Monitoring Lanjutan</option>
                                    </select>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 p-3 bg-amber-50 border border-amber-100 rounded-lg">
                                <i data-lucide="info" class="w-4 h-4 text-amber-600"></i>
                                <p class="text-[10px] text-amber-700 italic">Terakhir diupdate oleh <b>Tim Ops 34 (Roni)</b> pada 15-12-2025 14:20 (Audit Trail tersimpan)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- (Placeholder for other tabs: HISTORY, TOP, ALERT, LAPORAN) -->
        <section id="history" class="tab-content text-center py-20 text-slate-400">
            <i data-lucide="database" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
            <h3 class="font-bold">History Database</h3>
            <p class="text-xs">Fitur arsip kubikasi & pembayaran multi-tahun sedang memuat...</p>
        </section>

        <section id="top" class="tab-content text-center py-20 text-slate-400">
            <i data-lucide="award" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
            <h3 class="font-bold">TOP 100 Premium Customers</h3>
            <p class="text-xs">Sorting data pelanggan premium & tunggakan tertinggi...</p>
        </section>

        <section id="alert" class="tab-content text-center py-20 text-slate-400">
            <i data-lucide="bell" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
            <h3 class="font-bold">Smart Notification</h3>
            <p class="text-xs">Mendeteksi fluktuasi abnormal hari ini...</p>
        </section>

        <section id="laporan" class="tab-content text-center py-20 text-slate-400">
            <i data-lucide="printer" class="w-12 h-12 mx-auto mb-4 opacity-20"></i>
            <h3 class="font-bold">Laporan Management</h3>
            <p class="text-xs">Menyiapkan format PDF/Excel resmi...</p>
        </section>

    </main>

    <!-- Footer Status -->
    <footer class="bg-white border-t border-slate-200 px-6 py-2 shrink-0 flex justify-between items-center text-[10px] font-bold text-slate-400">
        <div class="flex items-center gap-4">
            <span class="flex items-center gap-1"><span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span> SYSTEM CONNECTED</span>
            <span>LAST SYNC: 15-12-2025 21:30</span>
        </div>
        <div>
            PAM JAYA SUNTER DASHBOARD v3.2.0 (INTERNAL ONLY)
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // Init Lucide
        lucide.createIcons();

        // Tab System
        function openTab(tabId) {
            // Hide all
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-link').forEach(el => {
                el.classList.remove('active-tab');
                el.classList.add('text-slate-500');
            });

            // Show active
            document.getElementById(tabId).classList.add('active');
            
            // Find the link and activate it
            const activeLink = Array.from(document.querySelectorAll('.tab-link')).find(el => el.getAttribute('onclick').includes(tabId));
            activeLink.classList.add('active-tab');
            activeLink.classList.remove('text-slate-500');
        }

        // Charts
        window.onload = function() {
            // Trend Line Chart
            const ctxTren = document.getElementById('chartTren').getContext('2d');
            new Chart(ctxTren, {
                type: 'line',
                data: {
                    labels: ['01 Des', '05 Des', '10 Des', '15 Des', '20 Des', '25 Des', '30 Des'],
                    datasets: [
                        {
                            label: 'Total Sunter',
                            data: [12, 19, 25, 32, 38, 42, 45],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            fill: true,
                            tension: 0.4,
                            borderWidth: 3
                        },
                        {
                            label: 'Rayon 34',
                            data: [7, 10, 14, 18, 21, 23, 25],
                            borderColor: '#38bdf8',
                            borderDash: [5, 5],
                            tension: 0.4,
                            borderWidth: 2
                        },
                        {
                            label: 'Rayon 35',
                            data: [5, 9, 11, 14, 17, 19, 20],
                            borderColor: '#6366f1',
                            borderDash: [2, 2],
                            tension: 0.4,
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            grid: { borderDash: [2, 2], color: '#f1f5f9' },
                            ticks: { font: { size: 10 }, color: '#94a3b8', callback: v => 'Rp '+v+'M' }
                        },
                        x: { grid: { display: false }, ticks: { font: { size: 10 }, color: '#94a3b8' } }
                    }
                }
            });

            // Pie Composition
            const ctxPie = document.getElementById('chartPie').getContext('2d');
            new Chart(ctxPie, {
                type: 'doughnut',
                data: {
                    labels: ['Rayon 34', 'Rayon 35'],
                    datasets: [{
                        data: [54.2, 45.8],
                        backgroundColor: ['#2563eb', '#6366f1'],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: { legend: { display: false } }
                }
            });

            // Mini History Chart for Analisa
            const ctxHist = document.getElementById('chartHistoryKubikasi').getContext('2d');
            new Chart(ctxHist, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'],
                    datasets: [{
                        data: [420, 380, 450, 480, 520, 600, 580, 550, 590, 800, 1200, 2450],
                        backgroundColor: context => {
                            const val = context.raw;
                            return val > 1000 ? '#f43f5e' : '#94a3b8';
                        },
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { 
                        y: { display: false },
                        x: { grid: { display: false }, ticks: { font: { size: 8 } } }
                    }
                }
            });
        };
    </script>
</body>
</html>
