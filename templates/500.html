{% extends "base.html" %}

{% block title %}500 - Server Error{% endblock %}

{% block content %}
<div class="card" style="margin-top: var(--space-6); text-align: center; border: none; box-shadow: none;">
    <div class="card-body" style="padding: var(--space-6);">
        <!-- Error Icon -->
        <div style="margin-bottom: var(--space-4);">
            <i class="fas fa-server" style="font-size: 96px; color: var(--danger); opacity: 0.5;"></i>
        </div>
        
        <!-- Error Code -->
        <h1 style="font-size: 72px; font-weight: 700; color: var(--text-primary); margin: 0; line-height: 1;">
            500
        </h1>
        
        <!-- Error Message -->
        <h2 style="font-size: 24px; font-weight: 600; color: var(--text-primary); margin: var(--space-3) 0;">
            Internal Server Error
        </h2>
        
        <p style="font-size: 14px; color: var(--text-secondary); max-width: 400px; margin: 0 auto var(--space-5);">
            Maaf, terjadi kesalahan pada server. 
            Tim kami sudah diberitahu dan sedang memperbaikinya.
        </p>
        
        <!-- Action Buttons -->
        <div style="display: flex; gap: var(--space-3); justify-content: center; flex-wrap: wrap;">
            <a href="/" class="btn btn-primary">
                <i class="fas fa-home"></i>
                <span>Kembali ke Home</span>
            </a>
            
            <button onclick="location.reload()" class="btn btn-outline">
                <i class="fas fa-redo"></i>
                <span>Muat Ulang</span>
            </button>
        </div>
        
        <!-- Error Details (Optional - only in debug mode) -->
        {% if error_details %}
        <div style="margin-top: var(--space-6); padding: var(--space-4); background: var(--bg-tertiary); border-radius: var(--radius-md); text-align: left;">
            <div style="font-weight: 600; margin-bottom: var(--space-2); color: var(--danger);">
                <i class="fas fa-bug"></i> Error Details (Debug Mode)
            </div>
            <pre style="font-size: 12px; color: var(--text-secondary); margin: 0; overflow-x: auto; white-space: pre-wrap;">{{ error_details }}</pre>
        </div>
        {% endif %}
        
        <!-- Tips -->
        <div style="margin-top: var(--space-6); padding-top: var(--space-4); border-top: 1px solid var(--border-color);">
            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--space-3);">
                Jika masalah terus berlanjut:
            </div>
            <div style="display: flex; flex-direction: column; gap: var(--space-2); align-items: center;">
                <div style="font-size: 13px; color: var(--text-secondary);">
                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                    Coba refresh halaman (F5)
                </div>
                <div style="font-size: 13px; color: var(--text-secondary);">
                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                    Bersihkan cache browser
                </div>
                <div style="font-size: 13px; color: var(--text-secondary);">
                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                    Tunggu beberapa menit dan coba lagi
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Info Card -->
<div class="card" style="background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border: none;">
    <div class="card-body" style="display: flex; align-items: center; gap: var(--space-3);">
        <i class="fas fa-exclamation-triangle" style="font-size: 32px; color: var(--danger);"></i>
        <div>
            <div style="font-weight: 700; color: #991b1b; margin-bottom: var(--space-1);">Server Error</div>
            <div style="font-size: 13px; color: #7f1d1d;">
                Tim teknis sedang menangani masalah ini. 
                Mohon coba beberapa saat lagi.
            </div>
        </div>
    </div>
</div>

<!-- Quick Links -->
<div class="card">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-link"></i>
            Link Cepat
        </div>
    </div>
    <div class="card-body" style="padding: 0;">
        <a href="/" class="menu-item" style="display: flex; align-items: center; padding: var(--space-3); border-bottom: 1px solid var(--border-color); text-decoration: none; color: inherit;">
            <i class="fas fa-home" style="width: 20px; color: var(--primary);"></i>
            <span style="margin-left: var(--space-2);">Home</span>
        </a>
        <a href="/collection" class="menu-item" style="display: flex; align-items: center; padding: var(--space-3); border-bottom: 1px solid var(--border-color); text-decoration: none; color: inherit;">
            <i class="fas fa-wallet" style="width: 20px; color: var(--success);"></i>
            <span style="margin-left: var(--space-2);">Collection</span>
        </a>
        <a href="/belum-bayar" class="menu-item" style="display: flex; align-items: center; padding: var(--space-3); border-bottom: 1px solid var(--border-color); text-decoration: none; color: inherit;">
            <i class="fas fa-exclamation-circle" style="width: 20px; color: var(--danger);"></i>
            <span style="margin-left: var(--space-2);">Belum Bayar</span>
        </a>
        <a href="/upload" class="menu-item" style="display: flex; align-items: center; padding: var(--space-3); text-decoration: none; color: inherit;">
            <i class="fas fa-cloud-upload-alt" style="width: 20px; color: var(--info);"></i>
            <span style="margin-left: var(--space-2);">Upload</span>
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Log 500 error (optional)
console.error('500 Error: Internal Server Error');

// Auto-retry after 5 seconds (optional)
let retryCount = 0;
const maxRetries = 3;

/*
setTimeout(() => {
    if (retryCount < maxRetries) {
        retryCount++;
        console.log(`Auto-retry ${retryCount}/${maxRetries}...`);
        location.reload();
    }
}, 5000);
*/
</script>
{% endblock %}
